{"ast":null,"code":"import axiosConfig from '../axiosConfig';\nimport { toast } from \"react-toastify\";\nimport $ from \"jquery\";\nexport function loadProducts() {\n  return function (dispatch) {\n    return axiosConfig.request({\n      method: \"get\",\n      url: \"/products\",\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n      }\n    }).then(function (response) {\n      dispatch(getProducts(response.data));\n    }); //   }).catch(\n    //     error => {\n    //         switch (error.response.status) {\n    //             case 401:\n    //                 localStorage.removeItem(\"TOKEN\");\n    //                 window.location.href = \"/\";\n    //                 return \n    //             default:\n    //                 toast.error(error.response.data.message);\n    //             }\n    //         }\n    //     );\n  };\n}\nexport function getProducts(products) {\n  return {\n    type: 'GET_PRODUCTS',\n    products: products\n  };\n}\nexport default function addProduct(product) {\n  return function (dispatch) {\n    return axiosConfig.request({\n      method: \"post\",\n      url: \"/products/\",\n      data: product,\n      headers: {\n        'Access-Control-Request-Headers': '*',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n      }\n    }).then(function (response) {\n      dispatch(loadProducts());\n      $(\".styles_closeButton__20ID4\").click();\n      toast.success('Product ' + response.statusText);\n    }).catch(function (error) {\n      dispatch(loadProducts());\n      $(\".styles_closeButton__20ID4\").click(); //toast.error(`Product not Added! Make sure the name is unique.`)\n\n      switch (error.response.status) {\n        case 401:\n          localStorage.removeItem(\"TOKEN\");\n          window.location.href = \"/\";\n          return;\n\n        default:\n          toast.error(\"Product not Added! Make sure the name is unique.\");\n      }\n    });\n  };\n} // export  function editProduct (product){\n//     return (dispatch) =>{\n//         return axiosConfig.request({\n//             method: \"put\",\n//             url: `/products/{product.slug}`,\n//             data:product,\n//             headers: {\n//                 'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n//             }\n//         })\n//         .then((response) =>{\n//             dispatch(loadProducts());\n//             $(\".styles_closeButton__20ID4\").click();\n//             toast.success('Product ' + response.statusText)\n//         })\n//         .catch(\n//             error =>{\n//                 dispatch(loadProducts());\n//                 $(\".styles_closeButton__20ID4\").click();\n//                 //toast.error(`Product not Added! Make sure the name is unique.`)\n//                 switch (error.response.status) {\n//                     case 401:\n//                         localStorage.removeItem(\"TOKEN\");\n//                         window.location.href = \"/\";\n//                         return \n//                     default:\n//                     toast.error(`Product not Updated! Make sure the name is unique.`);\n//                     }\n//             }\n//         );\n//     }\n// }","map":{"version":3,"sources":["/Users/kwanj-k/mystuff/levelup/reactive_sm/src/actions/index.js"],"names":["axiosConfig","toast","$","loadProducts","dispatch","request","method","url","headers","localStorage","getItem","then","response","getProducts","data","products","type","addProduct","product","click","success","statusText","catch","error","status","removeItem","window","location","href"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,gBAAxB;AACA,SAAQC,KAAR,QAAoB,gBAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,SAASC,YAAT,GAAuB;AAC1B,SAAQ,UAACC,QAAD,EAAc;AACpB,WAAOJ,WAAW,CAACK,OAAZ,CAAoB;AACvBC,MAAAA,MAAM,EAAE,KADe;AAEvBC,MAAAA,GAAG,aAFoB;AAGvBC,MAAAA,OAAO,EAAE;AACP,yBAAiB,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADtB;AAHc,KAApB,EAONC,IAPM,CAOD,UAACC,QAAD,EAAc;AAChBR,MAAAA,QAAQ,CAACS,WAAW,CAACD,QAAQ,CAACE,IAAV,CAAZ,CAAR;AACH,KATM,CAAP,CADoB,CAWtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC,GAvBD;AAwBH;AAED,OAAO,SAASD,WAAT,CAAqBE,QAArB,EAA8B;AACjC,SAAO;AACHC,IAAAA,IAAI,EAAE,cADH;AAEHD,IAAAA,QAAQ,EAACA;AAFN,GAAP;AAIH;AAGD,eAAe,SAASE,UAAT,CAAqBC,OAArB,EAA6B;AACxC,SAAO,UAACd,QAAD,EAAa;AAChB,WAAOJ,WAAW,CAACK,OAAZ,CAAoB;AACvBC,MAAAA,MAAM,EAAE,MADe;AAEvBC,MAAAA,GAAG,cAFoB;AAGvBO,MAAAA,IAAI,EAACI,OAHkB;AAIvBV,MAAAA,OAAO,EAAE;AACL,0CAAkC,GAD7B;AAEL,yBAAiB,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAFxB;AAJc,KAApB,EASNC,IATM,CASD,UAACC,QAAD,EAAa;AACfR,MAAAA,QAAQ,CAACD,YAAY,EAAb,CAAR;AACAD,MAAAA,CAAC,CAAC,4BAAD,CAAD,CAAgCiB,KAAhC;AACAlB,MAAAA,KAAK,CAACmB,OAAN,CAAc,aAAaR,QAAQ,CAACS,UAApC;AACH,KAbM,EAcNC,KAdM,CAeH,UAAAC,KAAK,EAAG;AACJnB,MAAAA,QAAQ,CAACD,YAAY,EAAb,CAAR;AACAD,MAAAA,CAAC,CAAC,4BAAD,CAAD,CAAgCiB,KAAhC,GAFI,CAGJ;;AACA,cAAQI,KAAK,CAACX,QAAN,CAAeY,MAAvB;AACI,aAAK,GAAL;AACIf,UAAAA,YAAY,CAACgB,UAAb,CAAwB,OAAxB;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACA;;AACJ;AACA3B,UAAAA,KAAK,CAACsB,KAAN;AANJ;AAQH,KA3BE,CAAP;AA6BH,GA9BD;AA+BH,C,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axiosConfig from '../axiosConfig';\nimport {toast} from \"react-toastify\";\nimport $ from \"jquery\";\n\nexport function loadProducts(){\n    return  (dispatch) => {\n      return axiosConfig.request({\n          method: \"get\",\n          url: `/products`,\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n        }\n      })\n      .then((response) => {\n          dispatch(getProducts(response.data))\n      })\n    //   }).catch(\n    //     error => {\n    //         switch (error.response.status) {\n    //             case 401:\n    //                 localStorage.removeItem(\"TOKEN\");\n    //                 window.location.href = \"/\";\n    //                 return \n    //             default:\n    //                 toast.error(error.response.data.message);\n    //             }\n    //         }\n    //     );\n    }\n}\n\nexport function getProducts(products){\n    return {\n        type: 'GET_PRODUCTS',\n        products:products\n    }\n}\n\n\nexport default function addProduct (product){\n    return (dispatch) =>{\n        return axiosConfig.request({\n            method: \"post\",\n            url: `/products/`,\n            data:product,\n            headers: {\n                'Access-Control-Request-Headers': '*',\n                'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n            }\n        })\n        .then((response) =>{\n            dispatch(loadProducts());\n            $(\".styles_closeButton__20ID4\").click();\n            toast.success('Product ' + response.statusText)\n        })\n        .catch(\n            error =>{\n                dispatch(loadProducts());\n                $(\".styles_closeButton__20ID4\").click();\n                //toast.error(`Product not Added! Make sure the name is unique.`)\n                switch (error.response.status) {\n                    case 401:\n                        localStorage.removeItem(\"TOKEN\");\n                        window.location.href = \"/\";\n                        return \n                    default:\n                    toast.error(`Product not Added! Make sure the name is unique.`);\n                    }\n            }\n        );\n    }\n}\n// export  function editProduct (product){\n//     return (dispatch) =>{\n//         return axiosConfig.request({\n//             method: \"put\",\n//             url: `/products/{product.slug}`,\n//             data:product,\n//             headers: {\n//                 'Authorization': 'Bearer ' + localStorage.getItem(\"TOKEN\")\n//             }\n//         })\n//         .then((response) =>{\n//             dispatch(loadProducts());\n//             $(\".styles_closeButton__20ID4\").click();\n//             toast.success('Product ' + response.statusText)\n//         })\n//         .catch(\n//             error =>{\n//                 dispatch(loadProducts());\n//                 $(\".styles_closeButton__20ID4\").click();\n//                 //toast.error(`Product not Added! Make sure the name is unique.`)\n//                 switch (error.response.status) {\n//                     case 401:\n//                         localStorage.removeItem(\"TOKEN\");\n//                         window.location.href = \"/\";\n//                         return \n//                     default:\n//                     toast.error(`Product not Updated! Make sure the name is unique.`);\n//                     }\n//             }\n//         );\n//     }\n// }\n\n"]},"metadata":{},"sourceType":"module"}